<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Monad Jumper</title>
  <script>
    /* Immediate execution - write content before any other scripts run */
    (function() {
      // Determine if we're in Edge
      if (navigator.userAgent.indexOf('Edg') !== -1) {
        // For Edge, immediately show a completely static page with no dependencies
        document.write(`
          <style>
            body {
              background-color: #100a34;
              color: white;
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 40px 20px;
              text-align: center;
              line-height: 1.6;
            }
            .card {
              max-width: 600px;
              margin: 0 auto;
              background-color: rgba(255,255,255,0.1);
              padding: 30px;
              border-radius: 10px;
            }
            .btn {
              display: inline-block;
              background-color: #7d4cdb;
              color: white;
              text-decoration: none;
              padding: 12px 24px;
              border-radius: 6px;
              margin: 8px;
              font-weight: bold;
            }
            .options {
              display: flex;
              justify-content: center;
              flex-wrap: wrap;
              gap: 15px;
              margin: 20px 0;
            }
            .option {
              width: 120px;
              background-color: rgba(255,255,255,0.1);
              padding: 15px;
              border-radius: 8px;
            }
            .emoji {
              font-size: 32px;
              display: block;
              margin-bottom: 10px;
            }
          </style>
          <div class="card">
            <h1>Monad Jumper</h1>
            <p>We've detected that you're using Microsoft Edge browser with disabled wallet extensions.</p>
            <p>For the best experience, please use one of these alternatives:</p>
            
            <div class="options">
              <a href="https://www.mozilla.org/firefox/" class="option">
                <span class="emoji">ü¶ä</span>
                Firefox
              </a>
              <a href="https://www.google.com/chrome/" class="option">
                <span class="emoji">üåê</span>
                Chrome
              </a>
              <a href="https://brave.com/download/" class="option">
                <span class="emoji">üõ°Ô∏è</span>
                Brave
              </a>
            </div>
            
            <p>Or enable your OKX Wallet extension in Edge:</p>
            <p>1. Click <strong>...</strong> in Edge toolbar</p>
            <p>2. Select <strong>Extensions</strong></p>
            <p>3. Find <strong>OKX Wallet</strong> and enable it</p>
            <p>4. <a href="javascript:window.location.reload()" class="btn">Refresh this page</a></p>
          </div>
        `);
        return; // Stop execution for Edge
      }
      
      // For all other browsers, continue loading normally but don't do anything here
    })();
  </script>
  
  <!-- Only include this for non-Edge browsers -->
  <link rel="icon" type="image/svg+xml" href="/src/favicon.svg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Add script to inject fixes into game iframe -->
  <script>
    // Function to inject our fixes script into the game iframe when it loads
    window.addEventListener('load', function() {
      // Wait for React to initialize and create iframes
      setTimeout(function() {
        const iframes = document.querySelectorAll('iframe');
        
        iframes.forEach(function(iframe) {
          iframe.addEventListener('load', function() {
            console.log('Injecting fixes into game iframe:', iframe.src);
            
            try {
              // Create and inject the script directly into the iframe
              const script = iframe.contentDocument.createElement('script');
              script.src = '/game-fixes.js';
              iframe.contentDocument.head.appendChild(script);
              
              console.log('Game fixes script injected successfully');
            } catch (error) {
              console.error('Failed to inject game fixes:', error);
            }
          });
        });
      }, 1000); // Wait for React to initialize
    });
  </script>
  
  <!-- Add this right after the Edge detection script -->
  <script>
    // Register service worker for Edge/OKX compatibility
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('Service worker registered:', reg))
        .catch(err => console.error('Service worker registration failed:', err));
    }
  </script>
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>
</html> 